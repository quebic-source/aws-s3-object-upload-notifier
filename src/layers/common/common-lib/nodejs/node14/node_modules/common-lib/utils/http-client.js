const axios = require('axios');

// default headers
const commonHeaders = {
  'Content-Type': 'application/json',
};

function prepareRequest({ headers }) {
  return { headers: Object.assign(commonHeaders, headers) };
}

function errorHandler(e) {
  return Promise.reject(e);
}

function get(url, headers = {}) {
  return axios
    .get(url, prepareRequest({ headers }))
    .then((response) => response.data)
    .catch(errorHandler);
}

function post(url, data, headers = {}) {
  const prepHeaders = prepareRequest({ headers });
  return axios
    .post(url, data, prepHeaders)
    .then((response) => response.data)
    .catch(errorHandler);
}

async function put(url, data, headers = {}) {
  return axios
    .put(url, data, prepareRequest({ headers }))
    .then((response) => response.data)
    .catch(errorHandler);
}

async function patch(url, data, headers = {}) {
  return axios
    .patch(url, data, prepareRequest({ headers }))
    .then((response) => response.data)
    .catch(errorHandler);
}

module.exports = {
  get,
  post,
  put,
  patch
}
